<!DOCTYPE html>
<html lang="en">	
	<head>
        <title>Progressive Pattern Mining Tool</title>
        <meta http-equiv="Content-Type" content="text/html" charset="utf-8">
<!--         <script src="Vis/vis.js" type="text/javascript"></script> -->
<!--         <script src="TimelineScript.js" type="text/javascript"></script> -->
<!--         <script src="http://api.simile-widgets.org/timeline/2.3.1/timeline-api.js?bundle=true" type="text/javascript"></script> -->
        <link rel="stylesheet" type="text/css" href="style.css">
        <link href="Vis/vis.css" rel="stylesheet" type="text/css" />
        <link href="noUiSlider/nouislider.css" rel="stylesheet" type="text/css" />
    </head>

<!-- 	<body onload="onLoad();" onresize="onResize();"> 			Uniquement si on utilise la timeline MIT-->
	<body>
	
		<div id="wrapper">
			<div id="banner">
			
				<div><span class="caps">P</span>rogressive <span class="caps">P</span>attern <span class="caps">M</span>ining <span class="caps">T</span>ool</div>
				
				<div id="debugHelp">
					<div><span class="kbShort">H/?</span> : <span class="kbTxt">Exit debug mode</span></div>
					<div><span class="kbShort">S</span> : <span class="kbTxt">Ignore further patterns</span></div>
					<div id="debugHelpPointerTarget"><span class="kbShort">G</span> : <span class="kbTxt">Show pointer target</span></div>
					<div id="filler">&nbsp;</div> <!-- Only here to have the background display properly -->
				</div>
			</div>
			<div id="datasetSelection" class="section">
				<div class="text-centered">
					<h2>Select the dataset you want to use</h2>
				</div>
				<ul id='datasetList'>
				
				</ul>
			</div>
			<div id="tool">
			
				<div id="left">
					
					<div id="data" class="section">
					
						<div class="title">Data</div>
						
						<ul class="controlTabs">
							<li><a href="javascript:void(0)" class="controlTabLink active" onclick="openControlTab(event, 'Trace')">Trace</a></li>
							<li><a href="javascript:void(0)" class="controlTabLink" onclick="openControlTab(event, 'Events')">Event types</a></li>
							<li><a href="javascript:void(0)" class="controlTabLink" onclick="openControlTab(event, 'Users')">Users</a></li>
							<li><a href="javascript:void(0)" class="controlTabLink" onclick="openControlTab(event, 'Categories')">Categories</a></li>
						</ul>
						
						<div id="Trace" class="controlTabContent defaultControlTab">
							<!-- Info on trace -->
							<div class="subsection">
								<div class="title">This dataset</div>
								<div class="body" id="datasetInfo">
								
								</div>
							</div>
							<!-- <hr>
							<p>You can:</p>
							<button type="button" class='trace-action-button'>Create event</button>
							<button type="button" class='trace-action-button'>Delete event</button>
							<button type="button" class='trace-action-button'>Truncate trace</button>
							<button type="button" class='trace-action-button'>Delete user</button> -->
							<hr>
							<!-- history -->
							<div class="subsection">
								<div class="title">Your actions</div>
								<div class="body" id="history">
								
								</div>
							</div>
						</div>
						
						<div id="Events" class="controlTabContent">
							<div class="left-aligned">
								Show descriptions:
								<input type="checkbox" class="clickable" id="showEventTypeDescriptionInput" checked onchange="switchShowEventTypeDescription();">
							</div>
						
							<table id="eventTable">
								<thead>
									<tr class="clickable">
										<th onclick="clickOnEventTypeNameHeader()">Event&nbsp;type&nbsp;</th>
										<th id="eventsOccurrencesColumn" onclick="clickOnEventTypeNbEventsHeader()">Nb&nbsp;events&nbsp;↑</th>
										<th onclick="clickOnEventTypeCategoryHeader()">Category&nbsp;</th>
										<!-- <th class="sorttable_numeric">Symbol</th> -->
									</tr>
								</thead>
								<tbody id="eventTableBody">
								</tbody>
							</table>
							<p id="noEvent">No event available. Try connecting to a server and selecting a dataset.</p>
						</div>
						
						<div id="Users" class="controlTabContent">
							<form>
								<div class="searchBarArea">
									<!-- <input type="button" class="searchButton" value="Search"> -->
									<div class="searchFieldArea">
										&nbsp;
										<input type="text" class="searchField" placeholder="Write user names here">
										<input type="text" class="suggestionField" disabled>
									</div>
								</div>
							</form>
							
							<div id="userTableArea">
								<table id="userTable">
									<thead>
										<tr class="clickable">
											<th onclick="clickOnUserNameHeader()">User&nbsp;</th>
											<th id="eventsPerUserColumn" onclick="clickOnUserNbEventsHeader()">Nb&nbsp;events&nbsp;↑</th>
											<th onclick="clickOnUserDurationHeader()">Duration&nbsp;</th>
											<th onclick="clickOnUserNbSessionsHeader()">Nb&nbsp;sessions&nbsp;</th>
											<th onclick="clickOnUserStartHeader()">Start&nbsp;</th>
											<th onclick="clickOnUserEndHeader()">End&nbsp;</th>
										</tr>
									</thead>
									<tbody id="userTableBody">
									</tbody>
								</table>
							</div>
						</div>
						
						<div id="Categories" class="controlTabContent">
							<div id="categoryTableArea">
								<table id="categoryTable">
									<thead>
										<tr>
											<th onclick="clickOnCategoryNameHeader()">Category</th>
											<!-- <th id="eventsPerCategoryColumn" onclick="clickOnCategoryNbEventsHeader()">Nb events</th> -->
											<th>Color</th>
										</tr>
									</thead>
									<tbody id="categoryTableBody">
									</tbody>
								</table>
							</div>
						</div>
					
					</div>
					
				</div>
				
				<div id="middle">
				
					<div id="top" class="section">
						<div class="title">Current highlights</div>
						<div class="body">
							<!-- Activity indicator, disabled for now
							<svg class="leftAligned no-margin-top no-margin-bottom" width="14.4" height="14.4">
								<circle cx="7.2" cy="7.2" r="5" stroke="black" stroke-width="1" fill="grey"/>
							</svg> -->
							<!-- <p class="leftAligned no-margin-top no-margin-bottom">Current highlights: </p> -->
							<div class="leftAligned no-margin-top no-margin-bottom" id="userHighlight">No user</div>
							<div class="leftAligned lastItem no-margin-top no-margin-bottom" id="eventTypeHighlight">No event type</div>
							<div class="rightAligned"></div>
						</div>
					</div>
				
				<!--  <div id="display">  -->
					<div id="center" class="section">
						<div id="timeline-view">
							<div id="timeline">
								<div class="subsection">
									<div class="title">Overview</div>
									<div id="tl_overview" class="body"></div>
								</div>
								<!-- <div class="subsection">
									<div class="title">Trace exploration</div>
									<div id="tl_focusControl" class="body"></div>
								</div> -->
								<div class="subsection">
									<div class="title">All users</div>
									<div id="tl_focusControl" class="param"></div>
									<div id="tl_focus" class="body"></div>
								</div>
								<div class="subsection">
									<div class="title">Exploration per user</div>
									<div id="tl_usersControl" class="param">
									<span>Show 
										<span id="showUserSessionsSwitch" class="switchArea">
											<button type="button" value="all" class="selectedOption" onclick="showUserSessions('all');">All users</button><button type="button" value="selected" id="showSelectedUserSessionsButton" onclick="showUserSessions('selected');">Selected users (0)</button><button type="button" value="some" onclick="showUserSessions('some');">Some users</button></span>
									</span>
									<span id="shownUserSessionsControl" class="hidden">Users shown: <span id="nbUserShownValue">&nbsp;</span><input type="range" id="nbUserShownInput"></span>
									<span id="drawIndividualEvents" class="hidden">Show events: <input type="checkbox" class="clickable" id="drawIndividualEventsInput" onchange="changeDrawIndividualEventsOnSessions();"></span>
									<span id="showOnlyHighlightedInSessions" class="hidden">Only show highlighted events: <input type="checkbox" class="clickable" id="showOnlyHighlightedInSessionsInput" onchange="refreshUserPatterns();"></span>
									</div>
									<div id="tl_users" class="body"></div>
								</div>
								<!-- <div class="subsection">
									<div class="title">Selected users</div>
									<div id="tl_selectedUsers" class="body"></div>
								</div> -->
								<!-- <div class="tl_separator"><span>Trace exploration</span></div>
								<div id="tl_focusControl"></div>
								<div id="tl_focus"></div>
								<div class="tl_separator"><span>User patterns</span></div>
								<!-- <div id="tl_usersControl"></div> -->
								<!-- <div id="tl_users"></div>
								<div class="tl_separator"><span>Selected users</span></div>
								<div id="tl_selectedUsers"></div>
								<div class="tl_separator"><span>Selected patterns</span></div>
								<div id="tl_patterns"></div> -->
							</div>
							<!-- <div id="timelineOverview">
							
							</div> -->
							<div id="centerOverlay">
							
							</div>
						</div>
					
					</div>
				
				</div>
					
				<div id="right">
				
					<div id="algorithmInfo" class="section">
						<div class="title">Algorithm</div>
						<ul class="algorithmTabs">
							<li><a href="javascript:void(0)" class="algorithmTabLink active" onclick="openAlgorithmTab(event, 'Execution')">Execution</a></li>
							<!-- <li><a href="javascript:void(0)" class="algorithmTabLink" onclick="openAlgorithmTab(event, 'Metrics')">Metrics</a></li> -->
							<!-- <li><a href="javascript:void(0)" class="algorithmTabLink" onclick="openAlgorithmTab(event, 'Algorithm')">Mining</a></li> -->
						</ul>
					
						<div id="Execution" class="algorithmTabContent defaultAlgorithmTab">
							<div>
								<p>Runtime: <span id="runtime">00:00</span> <span id="currentAlgorithmWork">(Algorithm not running)</span></p>
								<p class="algoParameterRecap">Min. support: <span id="currentSupport">??</span></p>
								<p class="algoParameterRecap">Gap interval: <span id="currentGap">??</span></p>
								<p class="algoParameterRecap">Window size: <span id="currentWindow">??</span></p>
								<p class="algoParameterRecap">Max. size: <span id="currentSize">??</span></p>
								<!-- <p>Data used: <span id="dataUsed"></span></p>
								<p>Focusing on: <span id="focus"></span></p> -->
							</div>
							<div>
								
							</div>
						</div>
						<!-- 
						<div id="Metrics" class="algorithmTabContent">
							<p>Pattern sizes' distribution:</p>
							<div id="patternSizeDistribution">
							
							</div>
						</div>
						 -->
						<div id="Algorithm" class="algorithmTabContent">
							<div id="sliderSupportArea">
								<p>Support:<span class="iconHelper" id="helpSupport">&nbsp;&nbsp;(?)</span></p>
								<br>
								<div id="sliderSupport"></div>
							</div>
							<div id="sliderGapArea">
								<p>Gap:<span class="iconHelper" id="helpGap" title="Number of events in the pattern that don't belong to it">&nbsp;&nbsp;(?)</span></p>
								<br>
								<div id="sliderGap"></div>
							</div>
							<div id="sliderWindowArea">
								<p>Window:<span class="iconHelper" id="helpWindow">&nbsp;&nbsp;(?)</span></p>
								<br>
								<div id="sliderWindow"></div>
							</div>
							<div id="sliderSizeArea">
								<p>Size:<span class="iconHelper" id="helpSize">&nbsp;&nbsp;(?)</span></p>
								<br>
								<div id="sliderSize"></div>
							</div>
						</div>
					</div>
					
					<div id="patternArea" class="section">
					
						<div class="title">Patterns</div>
						<div class="subtitle"><span id="patternNumberSpan">0</span> discovered, <span id="selectedPatternNumberSpan">0</span> selected, <span id="highlightedPatternNumberSpan">0</span> matching the filter</div>
						<div class="param">
							<div class="left-aligned">
								Show text:
								<input type="checkbox" class="clickable" id="showPatternTextInput" checked onchange="switchShowPatternText();">
							</div>
						</div>
						<div id="patternListArea" class="body">
							<form>
								<div class="searchBarArea">
									<!-- <input type="button" class="searchButton" value="Search"> -->
									<div class="searchFieldArea">
										&nbsp;
										<input type="text" class="searchField" placeholder="Write event types here">
										<input type="text" class="suggestionField" disabled>
									</div>
								</div>
							</form>
							 
							<div id="List">
								<table id="patternTable">
									<thead>
										<tr class="clickable">
											<th onclick="clickOnPatternNameHeader()">Name&nbsp;</th>
											<th onclick="clickOnPatternSupportHeader()">Support&nbsp;</th>
											<th onclick="clickOnPatternSizeHeader()">Size&nbsp;↓</th>
										</tr>
									</thead>
									<tbody id="selectedPatternTableBody">
									</tbody>
									<tr id="patternListSeparator">
										<td colspan="3"><hr></td>
									</tr>
									<tbody id="patternTableBody">
									</tbody>
								</table>
						
							</div>
						</div>
					
					</div>
			
	<!-- 		
			
				<div id="header">
					<h2>Progressive Pattern Mining Tool</h2>
					<div class="button" id="startMining"> <a href="#" OnClick="startMining()">Start mining</a> </div>
					<div class="button" id="stopMining"> <a href="#" OnClick="stopMining()">Stop mining</a> </div>
					<div class="button" id="goToTimelineStart"> <a href="#" OnClick="goToTimelineStart()">Go to first event</a> </div>
					<div class="button" id="timelineOverview"> <a href="#" OnClick="timelineOverview()">View all events</a> </div>
					<div class="button" id="requestData"> <a href="#" OnClick="requestData()">Obtain Dataset</a> </div>
					<div class="button" id="drawLiftMatrix"> <a href="#" OnClick="drawLift()">Draw lift matrix</a> </div>
					<div class="button" id="steeringOnWriteSampleData"> <a href="#" OnClick="requestSteering('create')">Steer on create</a> </div>
				</div>
				<div id="timeline-view">
					<h4>Timeline view:</h4>
					<div id="timeline">
					
					</div>
				</div>
				<div id="pattern-view">
					<h4>Discovered patterns:</h4>
					<div id="pattern-list">
						<ul id="patterns">
						</ul>
					</div>
				</div>
				<div id="chart-view">
					<h4>Lift matrix:</h4>
					<div id="chart-lift">
					
					</div>
				</div>
				<div id="dataset-info">
					<h4>Current dataset:</h4>
					<h4>Dataset information:</h4>
					<p> Number of users : <span id="nbUsers">??</span><p>
					<p> Current user : <span id="currentUser"></span><p>
					<p> Number of different events : <span id="nbDiffEvents">??</span></p>
					<p> Number of discovered patterns : </p>
					<ul id="listNbPatternsStartingBy">
						<li> Total : <span id="nbTotal">0</span></li>
					</ul>
				</div>
				
	 -->			
				
				
			</div>
					
			<div id="tooltip" class="section hidden">
				<!-- <div class="title">Inspector</div> -->
				<div class="subtitle">Click somewhere to lock this tooltip</div>
				<div class="body">
				Hover over the visualizations to get more information
				</div>
			</div>
		</div>
	    <script src="jscolor/jscolor.js" type="text/javascript"></script> <!-- http://jscolor.com -->
		<script src="D3/d3.js" type="text/javascript"></script>
		<script src="noUiSlider/nouislider.js" type="text/javascript"></script>
		<script src="d3-symbol-extra.js" type="text/javascript"></script>
		<script src="customSymbols.js" type="text/javascript"></script>
		<script src="lz-string.js" type="text/javascript"></script> <!-- -->
		<script src="crossfilter.min.js" type="text/javascript"></script>
	    <script src="ClientScript.js" type="text/javascript" charset="utf-8"></script>
	    <script src="SortTable/sorttable.js" type="text/javascript"></script>
	    <!-- <script src="tooltip.js" type="text/javascript"></script> -->
	    <!-- <script src="ScatterplotTimeline.js" type="text/javascript"></script> <!-- -->
	    <!-- <script src="CanvasTimeline.js" type="text/javascript"></script> <!--   -->
	</body>
</html>
